"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Utils_1 = require("./Utils");
class Router extends Array {
    constructor() {
        super();
        this.routerMiddleware = [];
    }
    on(path, callback, ...middleware) {
        this.push({
            path: (0, Utils_1.parseURL)(path),
            middleware: [callback, ...middleware],
        });
    }
    use(path, router) {
        this.push(...router.map((route) => ({
            path: [...(0, Utils_1.parseURL)(path), ...route.path],
            middleware: [...this.routerMiddleware, ...router.routerMiddleware, ...route.middleware],
        })));
    }
    useMiddleware(...middleware) {
        this.routerMiddleware.push(...middleware);
    }
}
exports.default = Router;
